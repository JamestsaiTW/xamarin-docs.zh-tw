---
title: 第 2 部分 - 架構
description: 本文件說明協助您建置跨平台應用程式的架構模式。 它討論一般的應用程式層級 （資料層、 資料存取層等），以及常見的行動軟體模式 （MVVM、 MVC 等）
ms.prod: xamarin
ms.assetid: 2176DB2D-E84A-3757-CFAB-04A586068D50
author: asb3993
ms.author: amburns
ms.date: 03/27/2017
ms.openlocfilehash: 4f70690df46b71db75e48eca0fd901a854be0b21
ms.sourcegitcommit: 4a1520dee7759f8355ea65c8bb3d1bac8ba58122
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/29/2019
ms.locfileid: "66354001"
---
# <a name="part-2---architecture"></a>第 2 部分 - 架構

建置跨平台應用程式的主要宗旨就是建立一個架構，使它本身的跨平台共用程式碼最大化。 遵循下列的物件導向程式設計原則可協助建置完善的應用程式：

-   **封裝**– 確保類別以及甚至架構圖層只公開執行其必要的最低 API 函式，並會隱藏實作詳細資料。 在類別層級，這表示物件的行為以 ' 黑 '，使用程式碼不需要知道如何在它們完成其工作。 在架構層級，這表示實作模式，例如外觀，以簡化的 API，可協調代表更抽象層中的程式碼更複雜的互動。 這表示 UI 程式碼 （舉例來說） 應該只是負責顯示螢幕，並接受使用者輸入;而且永遠不會與資料庫直接互動。 同樣的資料存取程式碼應該只能讀取和寫入至資料庫，但永遠不會直接互動的按鈕或標籤。
-   **責任區隔**-請確認每個元件 (架構同時處理以及類別層級) 都有清楚且定義完善的目的。 每個元件應該僅執行其定義的工作，並公開 （expose） 透過 API 存取需要使用它的類別，該功能。
-   **多型**– 支援多個實作表示核心程式碼可以寫入，且共用跨平台，同時仍然與平台專屬功能互動的程式設計介面 （或抽象類別）。


自然結果是仿造實際或具有不同的邏輯層的抽象實體的應用程式。 您可以將程式碼分成層讓應用程式更容易了解、 測試和維護。 建議每個圖層中的程式碼會在實體上分隔 （無論是在目錄或甚至不同的專案，非常大型的應用程式），以及以邏輯方式分開 （使用命名空間）。

 <a name="Typical_Application_Layers" />


## <a name="typical-application-layers"></a>一般應用程式層級

在這份文件和案例研究我們參照下列六個應用程式層：

-   **資料層**– 非靜態資料持續性，可能是 SQLite 資料庫，但無法實作與 XML 檔案或任何其他適當的機制。
-   **資料存取層**-提供建立、 讀取、 更新、 刪除 (CRUD) 資料的存取權而不會公開給呼叫者的實作詳細資料的資料層周圍的包裝函式。 比方說，DAL 可能包含 SQL 陳述式來查詢或更新的資料，但了解這需要不到參考的程式碼。
-   **商務層**– （有時稱為商務邏輯層或 BLL） 包含商務實體定義 （模型） 和商務邏輯。 商務外觀樣式的候選項目。
-   **服務的存取層**– 用來存取雲端中的服務： 從複雜的 web 服務 (REST、 JSON、 WCF) 的資料與映像的簡單擷取從遠端伺服器。 封裝的網路功能的行為，並提供一個簡單的 API 應用程式和 UI 層使用。
-   **應用程式層**– 通常是平台特定 （通常不是跨平台共用） 或程式碼的程式碼是應用程式特定的 （不通常可重複使用）。 好的測試，是否要將程式碼放在 UI 層與應用程式層是 （a） 若要判斷類別是否有任何實際顯示的控制項，或 （b） 是否它無法在之間共用多個畫面或裝置 （例如。 iPhone 和 iPad）。
-   **使用者介面 (UI) 層**– 使用者端圖層中，包含小工具的畫面和控制器，可管理它們。


應用程式不一定要包含的所有圖層，例如服務的存取層不會存在不會存取網路資源的應用程式中。 因為作業都是非常基本，非常簡單的應用程式可能會合併資料層和資料存取層。

 <a name="Common_Mobile_Software_Patterns" />


## <a name="common-mobile-software-patterns"></a>常見的行動軟體模式

模式是擷取週期性常見問題的解決方案的建立的方式。 有幾個重要的模式有助於您了解建置可維護性/了解行動應用程式。

-   **模型、 檢視、 ViewModel (MVVM)** – 模型-檢視-ViewModel 模式是常用的支援資料繫結，例如 Xamarin.Forms 架構。 這藉由啟用 XAML 的 Windows Presentation Foundation (WPF) 和 Silverlight; 等的 Sdk其中 ViewModel 作為之間的資料 （模型） 和透過資料繫結和命令的使用者介面 （檢視） 之間的中間人。
-   **模型、 檢視、 控制器 (MVC)** – 一般和經常被誤解的模式，MVC 建置使用者介面時最常使用，並提供區隔 UI 畫面 （檢視），其背後的引擎，可以處理的實際定義互動 （控制器），並於其中填入它 （模型） 的資料。 模型是實際完全是選擇性的片段，因此，了解此模式的核心在於檢視和控制器。 MVC 是 iOS 應用程式的常用方法。
-   **商務外觀**– 也稱為管理員模式中，針對複雜的工作提供的簡化的進入點。 例如，在工作追蹤應用程式中，您可能必須`TaskManager`這類類別與方法`GetAllTasks()`， `GetTask(taskID)` ，`SaveTask (task)`等等。`TaskManager`類別會提供一個外觀來實際儲存/擷取的工作物件的內部運作方式。
-   **單一**– 單一子句模式提供曾經存在特定物件的單一執行個體所在的方法。 比方說，當行動裝置應用程式中搭配使用 SQLite，您只會想資料庫的一個執行個體。 使用單一子句模式是簡單的方式來確保此行為。
-   **提供者**– 一種模式出現 （說是類似的策略或基本的相依性插入） 的 microsoft 鼓勵所有 Silverlight、 WPF 和 WinForms 應用程式的 程式碼重複使用。 可以撰寫共用程式碼的介面或抽象類別，並會寫入平台特定的具象實作，並且將其傳遞中，使用程式碼時。
-   **非同步**– 不適用於與 Async 關鍵字，長時間執行的工作需要執行，但是不妨礙 UI 或目前的處理時，會使用模式的非同步混淆。 其最簡單的形式，非同步模式只是告訴您，長時間執行的工作應該開始的另一個執行緒 （或類似的執行緒抽象層，例如工作） 時目前的執行緒會繼續處理，並接聽的背景處理序的回應然後傳回資料，或狀態時，更新 UI。


每個模式會檢查更詳細的案例研究將說明其實際的使用說明。 維基百科有更詳細的說明[MVVM](https://en.wikipedia.org/wiki/Model–view–viewmodel)， [MVC](https://en.wikipedia.org/wiki/Model–view–controller)， [Facade](https://en.wikipedia.org/wiki/Facade_pattern)，[單一](https://en.wikipedia.org/wiki/Singleton_pattern)，[策略](https://en.wikipedia.org/wiki/Strategy_pattern)並[提供者](https://en.wikipedia.org/wiki/Provider_model)模式 (以及[設計模式](https://en.wikipedia.org/wiki/Design_Patterns)通常)。

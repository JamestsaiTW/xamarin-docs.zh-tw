---
title: 了解 SiriKit 概念
description: 本文件說明在 Xamarin.iOS 應用程式中使用的 SiriKit 所需的重要概念。 比方說，它會討論意圖和 Intents UI 延伸模組，SiriKit 權限，設計良好的使用經驗，和更多功能。
ms.prod: xamarin
ms.assetid: 99EC5C1E-484F-4371-8555-58C9F60DE37F
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 05/02/2017
ms.openlocfilehash: b72246968c9b321329e56fd51eaaa98a1625922e
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/25/2018
ms.locfileid: "50123072"
---
# <a name="understanding-sirikit-concepts"></a>了解 SiriKit 概念

_本文涵蓋在 Xamarin.iOS 應用程式中使用的 SiriKit 需要的重要概念。_


新增至 iOS 10，SiriKit 可讓 Xamarin.iOS 應用程式提供的 iOS 裝置上使用 Siri 和對應的應用程式的使用者可以存取的服務。 這項功能提供一或多個應用程式擴充功能使用新**意圖**並**Intents UI**架構。

SiriKit 可讓 iOS 應用程式提供使用應用程式擴充功能和新的 iOS 裝置上使用 Siri 和對應的應用程式的使用者可以存取的服務**意圖**並**Intents UI**架構。

使用 Siri 的運作方式的概念**網域**，群組知道相關工作的動作。 每個應用程式有使用 Siri 的互動必須分為其已知的服務網域，如下所示：

- 音訊或視訊通話。
- 預約好好體驗吧。
- 管理健身。
- 訊息傳遞。
- 正在搜尋相片。
- 傳送或接收付款。

當使用者提出的要求使用 Siri 牽涉到的其中一個應用程式擴充功能的服務時，SiriKit 傳送延伸模組**意圖**物件，描述使用者的要求，以及任何支援的資料。 應用程式擴充功能則會產生適當**回應**物件的給定**意圖**，詳細說明如何擴充功能來處理要求。

## <a name="the-intents-and-intents-ui-extensions"></a>Intents UI 延伸模組與意圖

Siri 和對應的應用程式與透過兩種不同的應用程式擴充功能的應用程式的服務的互動：

- **Intents 延伸模組**-提供 Siri 和對應的應用程式的內容，並執行完成任何支援的對應方式所需的工作。
- **Intents UI 延伸模組**-提供應用程式的內容 Siri 或 Maps 將會顯示自訂 UI。

應用程式必須提供支援 SiriKit Intents 延伸模組，它負責提供 Siri 和對應可以向使用者顯示的資訊，以及處理意圖。

建立 Intents UI 延伸模組是選擇性的因為 Siri 通常會處理所有的使用者互動，而具有標準的內建的 UI 呈現每個支援的網域中的資訊。 藉由提供 Intents UI 延伸模組，應用程式可以使用**意圖 UI**架構來呈現豐富的自訂使用者介面提供應用程式的商標和其他資訊。

## <a name="siri-and-the-maps-app-role"></a>Siri 和 「 地圖 」 應用程式角色

使用者的語音的要求會處理並由其變成可操作的意圖意圖延伸模組可以處理這些要求使用 Siri 語意分析的語言。

對應會使用應用程式的意圖延伸模組，以回應使用者動作的對應介面中顯示資訊。 例如附近的餐廳要求或取得應用程式的餐廳評論。

Siri 和對應管理所有使用者互動，並使用標準系統介面的結果顯示。 應用程式延伸模組角色主要是提供顯示的資料。 （選擇性） 應用程式可以提供 Intents UI 延伸模組，並顯示自訂 UI 以加強的預設系統介面。

## <a name="interacting-with-siri-via-sirikit"></a>與透過 SiriKit Siri 互動

本節將提供如何 SiriKit 可讓使用者使用 Siri 的應用程式互動的概觀。 基於此範例中，我們將使用假的 MonkeyChat 應用程式：

[![](understanding-sirikit-images/monkeychat01.png "MonkeyChat 圖示")](understanding-sirikit-images/monkeychat01.png#lightbox)

MonkeyChat 會保留它自己連絡活頁簿的使用者的好友，每個畫面名稱 （例如 Bobo 例如) 相關聯，並可讓使用者傳送給每一位朋友的文字聊天室的畫面名稱。

有許多使用者可能會啟動應用程式時，互動，因為不同的人可能會在許多不同形式的同一個要求的方法。

比方說，如果使用者想要將訊息傳送至其 friend Bobo，他們可能必須使用 Siri 下列交談：

_使用者： 嗨 Siri，傳送 MonkeyChat 訊息。_<br />
_Siri： 對象？_<br />
_使用者： Bobo。_<br />
_Siri： 項目是否要說出可以 Bobo？_<br />
_使用者： 請傳送更多的 Bananas。_<br />

另一個人可能會進行不同的交談使用相同的要求：

_使用者： 會傳送訊息至 Bobo MonkeyChat 上。_<br />
_Siri： 項目是否要說出可以 Bobo？_<br />
_使用者： 請傳送更多的 bananas。_<br />

然後另一位使用者可能會進行更短的要求：

_使用者： MonkeyChat Bobo 請傳送更多的 bananas。_<br />
_Siri： 好的傳送訊息請將更多的 bananas Bobo Monkeychat 上。_<br />

或甚至在不同的語言中進行相同的要求：

_使用者： MonkeyChat Bobo s'il vous plaît envoyer 加上 de bananes。_<br />
_Siri: Oui、 envoi 訊息 s'il vous plaît envoyer 以及 de bananes 相對 Bobo sur Monkeychat。_<br />

尚未另一位使用者可能很冗長，其交談中：

_使用者： 嗨 Siri，可以您請我偏好和啟動 MonkeyChat 應用程式傳送訊息的文字，請傳送詳細 bananas。_<br />
_Siri： 對象？_<br />
_使用者： 我最佳 pal Bobo。_<br />

此外，還有許多 Siri 可能回應的要求，根據提出要求的部分的方式：

- **藉由保留 [首頁] 按鈕**-Siri 會提供有限的口頭意見反應的更多視覺化回應。
- **由 「 嗨 Siri"** -Siri 會更詳細，並提供較少的視覺回應。

Siri 也會調整為符合使用者的協助工具需求，以及將互動和回應根據這些需求。

無論提出要求時使用 Siri 要求的回應方式，Siri 處理與使用者的交談，並 （透過其擴充功能） 的應用程式提供的功能。

當使用者提出 Siri 口頭要求時，這些是 Siri 將會依照下列步驟：

[![](understanding-sirikit-images/monkeychat02.png "Siri 會遵循的步驟")](understanding-sirikit-images/monkeychat02.png#lightbox)

1. 首先，Siri 接受使用者的音訊**語音**，並將它轉換成文字。
2. 接下來，將文字轉換成**意圖**、 結構化使用者要求的表示法。
3. 根據的目的，將需要 Siri**動作**執行使用者的要求。
4. 最後，將會呈現 Siri**回應**（視覺和口說） 來讓使用者根據採取的動作。

有三個應用程式可以參與使用者的交談使用 Siri 的主要方式：

[![](understanding-sirikit-images/monkeychat03.png "應用程式可以參與 Siri 使用者交談三種主要方法")](understanding-sirikit-images/monkeychat03.png#lightbox)

1. **詞彙**-這是如何應用程式會告訴 Siri 它需要知道與它互動的單字。
2. **應用程式邏輯**-這些是採取的動作和回應的應用程式會根據指定的對應方式。
3. **使用者介面**-這是選擇性的自訂使用者介面，應用程式可以提供其回應中。

### <a name="example"></a>範例

指定上述資訊，請檢查下列交談如何互動 MonkeyChat 應用程式：

_使用者： 嗨 Siri，傳送訊息至 Bobo MonkeyChat 上。_<br />
_Siri： 項目是否要說出可以 Bobo？_<br />
_使用者： 請傳送更多的 bananas。_<br />

應用程式會在交談中的第一個角色是要協助了解使用者的語音的 Siri:

[![](understanding-sirikit-images/monkeychat04.png "協助了解使用者語音 Siri")](understanding-sirikit-images/monkeychat04.png#lightbox)

Siri 不具有名稱"Bobo 」 在其資料庫中，但應用程式，並已透過其詞彙 Siri 與共用這項資訊。 應用程式也可協助辨識 Bobo 的收件者，因為它指定它們為 Siri Siri*連絡人*。

Siri 知道更多，就需要傳送比只是收件者的訊息，因此它會快速檢查以查看訊息是否需要內容的應用程式擴充功能。 詢問使用者因為 MonkeyChat 的話，會回應 Siri: *"什麼下達 Bobo？ 」*

在上述範例中，已回應的使用者， *「 請傳送更多的 bananas"*，其中 Siri 會結合到結構化**意圖**:

[![](understanding-sirikit-images/monkeychat05.png "Siri 會結合到結構化的意圖的使用者的回應")](understanding-sirikit-images/monkeychat05.png#lightbox)

結構化的意圖將會包含下列資訊：

- **網域：** 訊息
- **目的：** sendMessage
- **收件者：** Bobo
- **內容：** 請傳送更多的 bananas

每個網域都組知道*動作*零到多個參數可能會包含在目的，可以在其中執行及根據網域和動作，傳送至應用程式。

意圖會再傳送至應用程式擴充功能處理。 如此一來處理目的，應用程式將會產生**IntentResponse**這將會配套在意圖，而且包含參數所描述的應用程式的應用程式未與意圖。

也會包含每個 IntentResponse**回應碼**告知 Siri 應用程式是否可以或無法完成要求。 有些網域有非常特定的錯誤回應碼，也可以一併傳送。

最後，將會包含 IntentResponse `NSUserActivity` （例如用來支援手動關閉）。 `NSUserActivity`將用來啟動應用程式，回應需要保留 Siri 環境，然後輸入應用程式，以完成它。 

Siri 自動建置適當`NSUserActivity`來啟動應用程式，並收取使用者停止的地方 Siri 環境中。 不過，應用程式可以提供自己的`NSUserActivity`使用自訂的詳細資訊，如有必要。

在處理目的應用程式，並將其傳回 Siri 的回應後，會再顯示結果給使用者 （口頭和以視覺化方式）：

[![](understanding-sirikit-images/monkeychat06.png "口頭並以視覺化方式呈現給使用者的結果")](understanding-sirikit-images/monkeychat06.png#lightbox)

Siri 有數個內建回應使用者介面，針對每個應用程式可用的定義域。 不過，由於 MonkeyChat 提供選擇性的意圖 UI 延伸模組，它用來呈現的交談結果，在上述範例中的使用者。

## <a name="the-intent-lifecycle"></a>意圖的生命週期

有三個應用程式擴充功能需要執行處理意圖時的主要工作：

[![](understanding-sirikit-images/monkeychat07.png "意圖的生命週期")](understanding-sirikit-images/monkeychat07.png#lightbox)

1. 應用程式必須**解決**事件中的每個參數。 如此一來，應用程式會呼叫解決多次 （每個每個參數），有時多次相同的參數上直到應用程式和使用者同意要求的功能。
2. 應用程式必須**確認**它可以用來處理要求的意圖，並使用 Siri 告訴獲得預期的結果。
3. 最後，應用程式必須**處理**意圖和執行步驟，以達到所要求的結果。

### <a name="the-resolve-stage"></a>解析階段

解析階段可協助您了解的值，使用者有提供，並且可確保使用者實際上是由應用程式處理目的時，會發生什麼情況的 Siri。 

此階段也有機會影響 Siri 的行為，與使用者在交談期間的應用程式。 若要這樣做，應用程式會提供**解析回應**。 有許多不同類型的資料，了解 Siri 預先定義的回應。

從應用程式的解析度回應將會是最常見**成功**，這表示應用程式符合特定資料 （例如使用者的畫面名稱） 的參數從它所知的資訊片段。

可能有的有時候需要確認指定的要求符合正確的一段資訊它了解應用程式。 在這些情況下，它會傳送**ConfirmationRequired**例如詢問使用者是或否問題的回應 *」 傳送訊息給 Bobo 太好了嗎？ 」*

可能有其他情況下，應用程式將會需要使用者從選項的簡短清單中挑選。 在此情況下，應用程式會提供**去除混淆**一份二至十部選項，例如選擇從使用者的回應： 

```csharp
Who do you want to message?

* Bobo the Great
* Bobo Jr.
* Little Bobo
```

Siri 處理提出選取範圍，口頭或 Siri UI 中，與互動的使用者，結果會傳送給應用程式。

在其他情況下，可能不會有足夠的資訊來解析參數的應用程式，或可能有太多相符項目，若要解決使用去除混淆 （例如其名稱中使用 Bobo 80 使用者）。 在此情況下，應用程式會傳送**NeedsMoreDetails**回應和 Siri 會提示使用者為更為具體。

如果使用者未提供值，才能為其處理程序的目的，它可以傳送**NeedsValue**有 Siri 提示使用者輸入值的回應。

如果應用程式不支援使用者提供特定的參數值，它可以傳送**UnsupportedWithReason**回應提供理由，為什麼不支援的值。 Siri 然後會提示使用者提供全新的值，並指定它們的原因就是必要。

最後使用**NotRequired**回應以判斷 Siri 應用程式不需要指定參數的值。 如果使用者將會提供一個還是，它只會忽略由 Siri。

### <a name="the-confirm-stage"></a>在確認階段

在確認階段有兩種用途：

- 若要處理之意圖，以便 Siri 可以告訴使用者，將會發生預期的結果會告訴 Siri。
- 提供有機會檢查任何必要的狀態，應用程式可能需要完成的使用者，例如具有足夠的錢來要求付款 bank 中提出的要求。

應用程式會提供**意圖回應**確認步驟中，應該填入因為太多資訊的應用程式可讓 Siri 可以通訊，它實際上與使用者。

根據網域和動作類型，Siri 可能會提示使用者進行確認，例如之前傳送付款或預約好好體驗吧。

### <a name="the-handle-stage"></a>控制代碼的階段

處理階段是使用意圖，因為它是應用程式滿足使用者的要求執行要求執行工作的位置點的最重要的部分。

就像以前一樣在確認階段中，就必須提供相關資訊的結果越好，因此 Siri 使用者可以與此應用程式。 有時候這項資訊將會以視覺化方式呈現，或其他時候 Siri 只會將它傳回給使用者。 

當應用程式可能需要額外的時間來處理指定的要求，例如網路呼叫的延遲，或即時的人員必須滿足的要求 （例如完成，並傳送訂單或駕駛汽車到使用者的位置） 時，則可能是時間。 當 Siri 正在等候從應用程式的回應時，它會顯示等候 UI 給使用者，告知應用程式處理要求。

在理想情況下，應用程式應該提供回應 Siri 兩到三秒內最多。 如果應用程式知道給定的回應移至處理序花費的時間，它需要傳送**InProgress** Siri 到 」 回應碼。 應用程式正在處理中背景的要求，並將繼續這樣做，即使他們離開 Siri 環境 Siri 接著會通知使用者。

## <a name="adding-sirikit-to-the-app"></a>應用程式中新增 SiriKit

在 iOS 10 SiriKit，Apple 已建立兩個新的擴充點：

- **Intents 延伸模組**-Siri 提供應用程式的內容，並執行完成任何支援的對應方式所需的工作。
- **Intents UI 延伸模組**-Siri 的應用程式內容提供將會顯示自訂 UI。 

另外還有提供 Siri 協助辨識的表單中的單字和片語的 API:

- **應用程式的詞彙**-單字和片語通用於每一個應用程式的使用者。
- **使用者詞彙**-單字和片語所特有的指定應用程式使用者。

## <a name="the-intents-extension"></a>Intents 延伸模組

Intents 延伸模組會負責處理應用程式與 Siri 之間的主要互動，如下所示：

[![](understanding-sirikit-images/intents01.png "Intents 延伸模組")](understanding-sirikit-images/intents01.png#lightbox)

意圖延伸模組可支援一或多個對應方式，它是由開發人員決定他們要如何實作 SiriKit 應用程式中。 開發人員也可以新增個別的 「 意圖 」 擴充功能的每個需要處理的意圖。  話雖如此，Apple 要求開發人員限制意圖延伸模組數目，以便 Siri 不需要開啟應用程式，而這需要更多記憶體和時間，以處理多個處理序。

開發人員也應該注意，意圖延伸模組會執行在背景中時使用 Siri。 這可讓正在執行與使用者的交談仍然與要處理要求的相關資訊的擴充功能通訊時使用 Siri。

## <a name="privacy-and-security-considerations"></a>隱私權和安全性考量

Apple 已取得絕佳的量值，以確保私人資訊安全時使用 Siri，而且此情況下，有數個需要在 iOS 裝置上登入使用者的互動使用者。 例如，當要求的賽車或進行付款。

此外，還有應用程式可能會想要限制使用者所登入裝置的特定行為。 這些情況下，應用程式可以要求**限制鎖定時允許**行為。 這透過在設定完成`Info.plist`檔案。

本機的驗證架構是可用的意圖延伸模組的因此應用程式可以要求使用者，提供額外的驗證資訊，即使裝置已解除鎖定。

最後，Apple Pay 可供意圖擴充功能讓應用程式可以完成使用 Apple Pay 的交易，並內建 Apple Pay 的工作表會顯示上述 Siri 介面。

此外，Apple 想要確保使用者知道當他們傳送資訊至第 3 個合作對象應用程式，因此，使用者**必須**時說出特定的名稱 （如應用程式的套件組合顯示名稱中指定） 的應用程式提出要求。

Apple 已設計 Siri 實現自然、 流暢的交談與使用者，因為這個緣故，應用程式的套件組合名稱可以用於許多種詞類，只要能夠容納自然中使用者的要求。

常見的使用者所做的事情之一是"verbify 」 應用程式的名稱，亦即，採取應用程式名稱，並使用它做要求的動詞命令。 比方說， *"MonkeyChat Bobo 度過了一段很棒的 bananas。 」*

## <a name="the-intents-ui-extension"></a>Intents UI 延伸模組

Intents UI 延伸模組提供的機會，可讓應用程式的 UI 和商標 Siri 體驗，並讓使用者可以連線到應用程式。 與此延伸模組，應用程式帶來的品牌以及文字記錄視覺化和其他資訊。

[![](understanding-sirikit-images/intents02.png "Intents UI 延伸模組的範例輸出")](understanding-sirikit-images/intents02.png#lightbox)

Intents UI 延伸模組一律會傳回`UIViewController`和應用程式可以新增其所偏好的檢視控制器，例如顯示其他資訊，超出的初始回應內的任何項目。 Intents UI 也可以更新使用者長時間執行的事件，例如持續時間需要共用連線到其位置的汽車等的狀態。

Intents UI 延伸模組將一律顯示以及其他 Siri 內容，例如應用程式圖示和名稱，在 UI 的上方或，根據的目的，可能會顯示在底部的按鈕 （例如 [傳送] 或 [取消]）。

有幾個執行個體，應用程式可以在其中取代 Siri 會向使用者顯示的例如傳訊或其中應用程式時，可以使用其中一個應用程式量身打造取代體驗預設會將對應的資訊。

> [!IMPORTANT]
> 雖然您可以加入互動式元素，例如`UIButtons`或是`UITextFields`意圖 UI 延伸模組的`UIViewController`這些嚴格禁止為意圖 UI 以非互動，使用者將無法與它們互動。

它是完全選擇性的應用程式提供的意圖 UI 延伸模組，因為 Siri 包含一組預設 UI 的每個意圖的類型。 此外，Intents UI 介面可只針對特定用途 Apple 已被視為項目很有幫助使用者。

## <a name="adding-sirikit-vocabulary"></a>新增 SiriKit 詞彙

實作 SiriKit 的最後一步是在應用程式內提供必要的詞彙。 許多應用程式有獨特的方式來描述使用者和使用者會提供資訊給應用程式的唯一方式的資訊。

因為這個緣故，Siri 需要了解的單字和片語的唯一應用程式的應用程式的協助。 這些片語的一些會在應用程式部分，讓每位使用者將會知道並了解它們。 尚未其他人不重複的應用程式指定的使用者。

### <a name="app-specific-vocabulary"></a>應用程式特定詞彙

應用程式特定詞彙定義的特定單字和片語，就是所有的應用程式的使用者，例如車輛類型或健身名稱。 由於這些是應用程式的一部分，以定義它們`AppIntentVocabulary.plist`檔案做為主要的應用程式套件組合的一部分。 此外，應該當地語系化這些單字和片語。

有數個部分詞彙`AppIntentVocabulary.plist`檔案：

- **範例應用程式會使用**-這些使用者可以進行應用程式的要求提供一組的常見使用案例。 例如： *"啟動了與 MonkeyFit。 」*
- **參數**-這些提供一組特定的應用程式的非標準的參數型別。 比方說，健身名稱 MonkeyFit 應用程式。 這些包含：
    - **片語**-可讓應用程式定義的應用程式的唯一字詞。 比方說: 「 Bananarific"健身類型 MonkeyFit 應用程式。 
    - **發音**-讓 Siri 為簡單的語音拼法的特定片語發音提示。 例如，"ba nana ri fic"。
    - **範例**-提供的範例應用程式中使用給定的片語。 例如， *」 開始 Bananarific 中 MonkeyFit"*。

如需詳細資訊，請參閱 Apple[應用程式的詞彙檔案格式參考](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/CustomVocabularyKeys.html#//apple_ref/doc/uid/TP40016875-CH10-SW1)。

### <a name="user-specific-vocabulary"></a>使用者特定詞彙

您可以將使用者特定詞彙提供單字或片語，且是唯一的應用程式的個別使用者。 這些會提供在執行階段從主要的應用程式 （不應用程式擴充功能） 做為排序的最大顯著性使用量優先順序的使用者，最重要的條款，在清單開頭的詞彙的已排序集合。

看看上述 MonkeyChat 應用程式的範例。 MonkeyChat 會保留所有使用者的連絡人，它會傳送至 Siri 透過使用者特定詞彙的清單。 它也會保留 10 個使用者具有每來就訊息的最新連絡人的清單，而且具有一組每一位使用者的我的最愛連絡人。 此範例中，最愛的連絡人應該是我們使用者特定詞彙，後面接著新的連絡人開頭然後其餘的使用者的連絡人。

使用者特定的詞彙支援下列類型的資訊：

- 連絡人的名稱。
- 健身名稱。
- 相片專輯名稱。
- 相片的關鍵字。

如果應用程式需要 iOS 通訊錄，應用程式不會採取任何動作，因為這項資訊已可使用 Siri。 應用程式只需要提供連絡人名稱，如果應用程式有自己的連絡人的唯一資料庫。

在設計時的詞彙，只提供使用者知道，和關心的必要值。 請避免提供資訊，例如電話號碼或電子郵件地址。

應用程式也需要使用者特定詞彙變更時，立即更新 Siri。 使用者已經習慣從 Siri 加入其 iOS 裝置的執行個體提出要求的資訊。 比方說，如果使用者在應用程式中加入新的連絡人，傳送該資訊來 Siri 使用者將它儲存為。

更重要的是，應用程式_必須_刪除資訊 Siri 詞彙的立即因為如果一項資訊將它們刪除，但 Siri 仍已辨識其小時或天後，可能會因為使用者。

> [!IMPORTANT]
> 應用程式應該移除所有的使用者特定詞彙 Siri 若使用者選擇重設應用程式，或如果他們登出。

## <a name="sirikit-permissions"></a>SiriKit 權限

SiriKit 的最後一段的重心是權限。 就像使用 iOS （例如相片、 數位相機或連絡人） 的其他功能，使用者必須授與明確的權限來向 Siri 應用程式。

應用程式就能夠提供的字串，定義哪些資訊，它會提供給 Siri，並提供理由為何使用者應該授與此存取權。 

Apple 建議應用程式應該向使用者使用他們已經升級至 iOS 10 之後，使用者開啟應用程式的 Siri 第一個時間要求權限。 這是讓使用者知道 Siri 整合，和它們進行其第一個要求之前，可以預先核准的使用方式。

## <a name="sirikit-and-maps"></a>SiriKit 和對應

SiriKit 是 iOS 中不可或缺的一部分，並使用較大的意圖架構新增至 iOS 10。 Intents 架構被設計成與系統的其他部分共用一般和共用的動作和意圖。

Intents framework 不僅止於只使用 Siri 整合，並提供其他功能，例如連絡人整合應用程式，可能會變成預設的電話語音或特定連絡人的傳訊應用程式。 「 意圖 」 也會提供與為使用者提供最佳的 VOIP 體驗可能 CallKit 緊密結合。

在 iOS 10 中的對應應用程式新增功能，例如騎共用的使用者可以在其中書籍好好體驗吧，直接在對應的 UI。 SiriKit 提供常見的擴充點，與地圖，讓 Siri 和對應間可以共用的賽車的共用 （和其他） 的對應方式。 

這表示，如果應用程式已採用 SiriKit 延伸模組，它也會取得地圖整合免費。 

## <a name="designing-a-great-siri-experience"></a>設計絕佳的 Siri 體驗

設計絕佳的使用者體驗，將應用程式整合到 Siri 時是不同於設計絕佳的應用程式使用者介面。 不同於正常情況下，使用者互動直接在應用程式的位置 畫面中，當有使用 Siri 的情況是，沒有視覺化介面完全可見時。 例如，當使用者已經開始交談並 *"Hey Siri"*。

### <a name="how-siri-helps-the-developer"></a>Siri 如何協助開發人員

在設計時使用 Siri 的應用程式的互動，將會建置應用程式*交談介面*，這表示內容衍生自 Siri 有使用上的應用程式代表使用者的交談。

在視覺上的參考不存在，使用者必須追蹤的腦袋中的資訊。 因為這個緣故，Siri 提供裸機最小所需的資訊來完成工作的使用者會想要完成。

交談式介面形狀的問題與回應使用者和 Siri 從在交談期間。 因此務必考慮如何 Siri 會詢問一些問題，以及設計這個介面時的回應。

請使用以下的範例，建立一則訊息，問題，可能會回應 Siri 使用者 *「 準備將它傳送嗎？ 」*. 使用者無法這類回應許多不同的方式 *「 傳送 」*， *"Cancel"* 或甚至是完全不相關的這個問題。 不論如何，交談播放，Siri 會處理應用程式中，並只傳送的相關資訊可供使用。

有幾種不同的方式，使用者可能會起始與 Siri 對話：

- 方法是揀選裝置，按 [首頁] 按鈕。 在此情況下更多的視覺介面和較少詳細的回應，將會顯示使用 Siri。
- 說明 *"Hey Siri"* 和啟動的免費實際操作的交談。 在此情況下使用 Siri 會較不視覺和更詳細。
- 使用協助工具功能，例如藍芽啟用 UI 調整之使用者的特殊需求的其中的期待輔助工具。
- 使用汽車播放，使用者必須保留其注意著重在達成保持在最低限度的干擾。

### <a name="how-the-developer-helps-siri"></a>開發人員如何協助 Siri

整合應用程式與時使用 Siri，開發人員必須測試通常這項整合，並確保它們盡可能要求相同的資訊或工作的多個不同的方式進行許多不同的要求。

任兩個人員都認為，因為很重要，開發人員會取得多個不同的 beta 版測試人員，以幫助微調 Siri 整合。 使用者可能會要求資訊或進行要求的方式開發人員永遠不會透過的和此微調，可以協助確保最廣泛的一群使用者有絕佳的體驗，其應用程式使用 Siri。

在不同情況和環境中測試。 起始交談的所有方式，可確保這些交談保持流暢且自然的 Siri。 測試在其中使用者會很可能會使用應用程式，例如擁擠健身房中的位置。

請確定應用程式會提供所有 Siri 需要正確地代表使用者的要求和結果的資訊。 當使用 Siri 的免費實際操作的情況下，這是特別有用。

### <a name="siri-design-guidelines"></a>Siri 設計指導方針

請務必記住，Siri 對話的使用者代表應用程式。 開發人員會想要確定這項交談會保持為流暢並盡可能自然的範圍。

如同處理任何重要的交談，開發人員必須確定下列事項：

- 該應用程式已準備好交談。
- 應用程式會接聽完全使用者嘗試完成的工作。
- 該應用程式會在適當的時間要求適當的問題。
- 該應用程式回應要求，並搜尋使用者的資訊。

#### <a name="preparing-for-the-conversation"></a>準備進行交談

要記住第一件事是，應用程式的使用者不太可能完全一樣的開發人員。 也可能是從不同的背景，使用不同的語言，或使用應用程式時有特殊的需求。

此外，因為開發人員設計及建置應用程式時，他們有深，深入了解應用程式和其內部運作方式和一般使用者不會有的函式。 因此，開發人員可能會不同於一般的使用者要求 Siri 的要求。

這就是為什麼它是非常重要的因為許多不同的人，盡可能互動的應用程式，透過使用 Siri。 使用者可以進行的開發人員已從不相信有一天或方式開發人員未考量的 Siri 透過應用程式的要求。

#### <a name="ensure-the-app-is-a-good-listener"></a>請確定應用程式是很好的接聽程式

開發人員必須確保應用程式是很好的接聽程式，並會開始交談的細節，顯示符合使用者的期望。 但是，也可以，它們可能尚未提供的所有資訊的應用程式需要以達到要求的工作。

有數種方式，應用程式無法處理這種情況：

- **遺漏值挑選最佳的預設**-例如大功告成，共用應用程式可能會預設為使用者的目前位置上，如果他們未指定他們想要從挑選的位置。
- **請來猜測**-使用應用程式收集使用者的特定資訊，應用程式或許能夠廠牌與這些遺漏的資訊，例如填寫遺失的行動電話號碼，從使用者的連絡資訊來猜測。 不過，應該小心避免錯誤的意外狀況，例如挑選最昂貴的選項等。
- **如需詳細資訊提示**-應用程式可以讓 Siri 提示使用者輸入遺漏的值。 不過，這裡的重點保持交談，簡單和點。 使用者將會快速地變得無法如果他們必須回答幾個問題，以達到其要求。
- **誤傳正常處理**-使用者可能會提供應用程式未預期或無法處理指定的內容中的值。 請確定應用程式與給使用者，讓它清楚且他們可以輕鬆將更正這種情況。

看到應用程式時有問題的單一值，處理此作業的慣用的方法是有 Siri 要求使用者確認。 比方說， *」 嗎 Bobo 太好了嗎？ 」*，其中它們可以使用簡單的是或否回應回覆。

當有數個可能的選項可能是正確的單一值的情況下，去除混淆是慣用的處理方法。 在此情況下使用 Siri 可以提示具有最多十個可能的選項，可從中選擇的使用者。 例如: 

```csharp
Who do you want to send the message to?

* Bobo the Great!
* Bobo Jr.
* Little Bobo
```

如果仍在問題，有 Siri 提示使用者提供全新、 更明確的答案，針對指定的值。

#### <a name="request-final-confirmation"></a>要求最終的確認

應用程式實際執行工作，以滿足使用者的要求之前，請使用 Siri 會檢查與應用程式擴充功能，以確保一切都已就緒。 比方說，使用者沒有足夠的錢以付款要求其帳戶中？

此外，應用程式必須確定，它會提供所有可能的資訊給 Siri 以便它可以呈現給使用者，並確認即將執行工作符合客戶的期望。

一旦使用者確認要求和應用程式已執行它，以再次確保它已提供的所有結果回到 Siri 讓它可以與這些使用者的應用程式需求。

#### <a name="responding-to-the-request"></a>回應要求

Siri 有數個內建的使用者介面的每個網域，以及它所知道的動作。 不過，適用時，應用程式可以提供自訂的意圖 UI 擴充功能，以豐富使用者體驗會呈現應用程式的商標和 UI 或比要求中的詳細資訊。

話雖如此，Siri 設計自訂的介面時，就應該使用本例。 一般而言，使用者想要取得特定工作盡快完成，而且不想要多載使用不必要的資訊。

也小心以確保自訂 UI 看起來，並正確回應中的所有不同的 iOS 裝置和使用者可能會有的或使用裝置的方向。

請在適當時機使用 SiriKit API 來隱藏預設 Siri UI 中已有任何重複的資訊。 尚未確定，應用程式仍提供資訊給 Siri 讓它可以呈現口頭上的 免費實際操作的情況。

可能會有一些情況 Siri 會在其中啟動應用程式，以滿足使用者的要求，例如呈現使用者已要求的相片。 在這些情況下，不要感到驚訝的使用者。 顯示預期的資訊，而不需要中繼步驟或進一步所需的互動。 永遠不會顯示資訊或執行未預期使用者的工作。

### <a name="polishing-the-design"></a>修改設計

有幾個步驟，Apple 建議精進的對話介面設計。 首先，是藉由提供清楚、 簡潔詞彙和使用案例範例，以使用 Siri。

使用者會探索應用程式的方式之一是起始交談 Siri 和要求， *"什麼呢？ 」* Siri 會顯示數個不同的項目，它可以執行，包括開發人員的應用程式和範例 hero 的使用案例，可透過其`plist`檔案。

如何撰寫使用案例很好的範例：

- 請確定範例包括應用程式名稱。
- 保持範例簡短，並以點。
- 針對每個應用程式所支援的對應方式提供多個範例。
- 排列優先順序的意圖和其中根據應用程式的最常見使用案例的範例。
- 請確定應用程式提供當地語系化的範例。
- 請確認指定的運作，如預期般應用程式內每個範例。
- 避免在範例中，因此不包含文字，例如位址 Siri *「 嗨 Siri...」*
- 例如，避免任何不必要的 pleasantries *「 請 」* 或 *[thank you]*。

需要足夠的時間來探索和實驗上應用程式如何塑造 Siri 已代表使用者的交談。 請務必洽詢作為其互動的一般使用者在整個程序，並期望的應用程式可能會隨著時間改變。

請務必記住，測試在不同的情況下的應用程式和所有不同的方法，可以叫用 Siri 交談。 測試在真實世界位置的使用者可能會使用應用程式，離開 office 和支援人員。

致力於與交談使用 Siri （代表應用程式） 流暢、 自然且 「 覺得恰到好處 」。 

## <a name="summary"></a>總結

這篇文章已涵蓋的重要概念，才能使用 SiriKit 並顯示它可以與 Xamarin.iOS 應用程式，以提供 iOS 裝置上使用 Siri 和對應的應用程式的使用者可以存取的服務互動。




## <a name="related-links"></a>相關連結

- [ElizaChat 範例](https://developer.xamarin.com/samples/monotouch/ios10/ElizaChat/)
- [SiriKit 程式設計指南](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html)
- [Intents Framework 參考](https://developer.apple.com/reference/intents)
- [Intents UI 架構參考](https://developer.apple.com/reference/intentsui)

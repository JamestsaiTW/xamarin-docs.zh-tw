---
title: "了解 SiriKit 概念"
description: "本文涵蓋將需要使用 SiriKit Xamarin.iOS 應用程式中的重要概念。"
ms.topic: article
ms.prod: xamarin
ms.assetid: 99EC5C1E-484F-4371-8555-58C9F60DE37F
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/16/2017
ms.openlocfilehash: 0c1253391673e48f81c12b80719db485d276013d
ms.sourcegitcommit: 73bd0c7e5f237f0a1be70a6c1384309bb26609d5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/22/2018
---
# <a name="understanding-sirikit-concepts"></a>了解 SiriKit 概念

_本文涵蓋將需要使用 SiriKit Xamarin.iOS 應用程式中的重要概念。_


新增 ios 10 SiriKit 允許 Xamarin.iOS 應用程式提供的 iOS 裝置上使用 Siri 和對應的應用程式的使用者可以存取的服務。 這個功能提供一個或多個應用程式擴充功能使用新**對應方式**和**目的 UI**架構。

SiriKit 讓 iOS 應用程式提供給使用者使用應用程式擴充功能和新的 iOS 裝置上使用 Siri 和對應的應用程式存取服務**對應方式**和**目的 UI**架構。

Siri 搭配的概念**網域**，群組的知道相關工作的動作。 每個應用程式具有 Siri 的互動必須歸類到其中一個其已知的服務網域，如下所示：

- 音訊或視訊電話。
- 預約的賽車。
- 管理健身。
- 訊息。
- 搜尋相片。
- 傳送或接收付款。

當使用者提出要求的 Siri 涉及其中一個應用程式擴充功能的服務時，SiriKit 傳送副檔名**意圖**物件，描述使用者的要求，以及任何支援的資料。 應用程式擴充功能會產生適當**回應**物件指定**意圖**，詳細說明如何擴充功能來處理要求。

## <a name="the-intents-and-intents-ui-extensions"></a>對應方式和對應方式 UI 延伸模組

Siri 和對應的應用程式與透過兩種不同的應用程式擴充功能的應用程式的服務互動：

- **對應方式擴充**-提供 Siri 和對應與應用程式的內容，並且會執行工作，才能滿足任何支援的對應方式。
- **對應 UI 延伸模組**-內 Siri 或對應的應用程式的內容中提供的自訂 UI，將會顯示。

應用程式必須提供對應方式擴充以支援 SiriKit，它負責提供 Siri 和對應可以向使用者顯示的資訊，以及處理方式。

建立目的 UI 延伸模組是選擇性的因為 Siri 通常會處理所有使用者互動，而且有標準的內建的 UI 呈現每個支援的網域中的資訊。 藉由提供的對應方式 UI 延伸模組，應用程式可以使用**意圖 UI** framework 提供豐富、 自訂使用者介面並且包含應用程式的商標和其他資訊。

## <a name="siri-and-the-maps-app-role"></a>Siri 和對應的應用程式角色

使用者的語音的要求為處理，語意分析 Siri 其變為可採取動作的對應方式意圖延伸模組可以處理這些要求的語言。

Maps 會使用應用程式的意圖延伸模組，以回應使用者動作的對應介面中顯示資訊。 例如附近的餐廳要求，或取得應用程式的餐廳檢閱。

Siri 和對應管理所有使用者互動，並顯示結果使用標準系統介面。 應用程式擴充功能角色主要是提供顯示的資料。 （選擇性） 應用程式可以提供的對應方式 UI 延伸模組，並呈現增強預設系統介面自訂 UI。

## <a name="interacting-with-siri-via-sirikit"></a>與透過 SiriKit Siri 互動

本節將提供概觀 SiriKit 如何讓使用者能夠使用 Siri 的應用程式互動。 這是因為此範例中，我們將使用假 MonkeyChat 應用程式：

[![](understanding-sirikit-images/monkeychat01.png "MonkeyChat 圖示")](understanding-sirikit-images/monkeychat01.png#lightbox)

MonkeyChat 會保留自己的使用者的好友連絡活頁簿，每個螢幕名稱 （例如 Bobo 例如) 相關聯，並可讓使用者在其顯示名稱，將文字聊天室傳送至每個 friend。

有許多使用者可能會啟動應用程式時，非互動，因為不同的人可能會導致相同的要求，以許多不同形式的方法。

比方說，如果使用者想要將訊息傳送至其 friend Bobo，它們可能會有下列的交談，並使用 Siri:

_使用者： Hey Siri，MonkeyChat 訊息傳送。_<br />
_Siri： 對象？_<br />
_使用者： Bobo。_<br />
_Siri： 什麼下達 Bobo？_<br />
_使用者： 請傳送多個香蕉。_<br />

其他人可能會導致不同的交談使用相同的要求：

_使用者： 傳送訊息至 Bobo MonkeyChat 上。_<br />
_Siri： 什麼下達 Bobo？_<br />
_使用者： 請傳送多個香蕉。_<br />

與其他使用者可能會導致即使較短的要求：

_使用者： MonkeyChat Bobo 請傳送多個香蕉。_<br />
_Siri: [確定] 傳送訊息請傳送多個香蕉給 Bobo Monkeychat 上。_<br />

或甚至在不同的語言中進行相同的要求：

_使用者： MonkeyChat Bobo s'il vous plaît envoyer 加上 de bananes。_<br />
_Siri: Oui、 envoi 訊息 s'il vous plaît envoyer 加上 de bananes à Bobo 南下 Monkeychat。_<br />

尚未另一位使用者可能非常詳細，其交談中：

_使用者： Hey Siri，可以您請我偏好與啟動 MonkeyChat 應用程式傳送訊息的文字，請傳送詳細香蕉。_<br />
_Siri： 對象？_<br />
_使用者： 我最佳 pal Bobo。_<br />

此外，還有許多 Siri 可能回應的要求，以製作要求之部分的方式：

- **藉由 [首頁] 按鈕**-Siri 會提供更多的視覺回應具有有限的用語意見。
- **由 「 < Hey Siri"** -Siri 會更詳細並提供較少的視覺化回應。

Siri 也會調整為符合使用者的協助工具需求，以及將互動和回應根據這些需求。

提出要求時，或使用 Siri 回應要求的方式，無論 Siri 處理與使用者的交談，並 （透過其擴充功能） 的應用程式提供的功能。

當使用者使用 Siri 口頭要求時，這些是 Siri 會遵循的步驟：

[![](understanding-sirikit-images/monkeychat02.png "Siri 將遵循的步驟")](understanding-sirikit-images/monkeychat02.png#lightbox)

1. 首先，使用 Siri 會採用使用者的音訊**語音**並將它轉換成文字。
2. 接下來，將文字轉換成**意圖**、 結構化使用者要求表示法。
3. 根據的目的，將會使用 Siri**動作**執行使用者要求。
4. 最後，將會呈現 Siri**回應**（visual 和用語） 使用者依據採取的動作。

有三種主要方式，應用程式可以參與使用者的交談，並使用 Siri:

[![](understanding-sirikit-images/monkeychat03.png "應用程式可以參與使用者交談，並使用 Siri 三種主要方法")](understanding-sirikit-images/monkeychat03.png#lightbox)

1. **詞彙**-這是如何應用程式會告知 Siri 需要知道要與之互動的單字。
2. **應用程式邏輯**-這些是動作和回應，應用程式會根據指定的對應方式。
3. **使用者介面**-這是選擇性的自訂使用者介面應用程式可提供其回應中。

### <a name="example"></a>範例

指定上述資訊，請檢查下列交談會與 MonkeyChat 應用程式的互動方式：

_使用者： Hey Siri，傳送訊息至 Bobo MonkeyChat 上。_<br />
_Siri： 什麼下達 Bobo？_<br />
_使用者： 請傳送多個香蕉。_<br />

應用程式會在交談中的第一個角色是要協助了解使用者的語音 Siri:

[![](understanding-sirikit-images/monkeychat04.png "協助了解使用者語音 Siri")](understanding-sirikit-images/monkeychat04.png#lightbox)

Siri 沒有名稱"Bobo 」 在其資料庫中，但在應用程式無法與已經與透過其詞彙 Siri 共用這項資訊。 應用程式也可協助辨識，Bobo 是收件者，因為它以做為 Siri 指定 Siri*連絡人*。

Siri 知道更多，就需要比只收件者，將訊息傳送，因此它會快速地檢查訊息必須內容應用程式副檔名。 詢問使用者因為 MonkeyChat 會將回應 Siri: *"什麼下達 Bobo？ 」*

在上述範例中，使用者已經回應， *「 請傳送多個香蕉 」*，Siri 會配套成結構化的**意圖**:

[![](understanding-sirikit-images/monkeychat05.png "Siri 會配套成結構化的意圖的使用者的回應")](understanding-sirikit-images/monkeychat05.png#lightbox)

結構化的意圖將會包含下列資訊：

- **網域：**訊息
- **意圖：** sendMessage
- **收件者：** Bobo
- **內容：**請傳送多個香蕉

每個網域都組知道*動作*零到多個參數可能會包含在目的，可以在其中執行並根據網域和動作，傳送至應用程式。

意圖會再傳送至應用程式擴充功能的處理。 如此一來處理意圖，應用程式將會產生**IntentResponse**會隨同意圖以及包含描述應用程式的應用程式未以進行操作的參數。

也會包含每個 IntentResponse**回應碼**表示應用程式是否可以完成要求，或不使用 Siri。 某些網域有非常特定的錯誤回應碼，也可以一併傳送。

最後，將會包含 IntentResponse `NSUserActivity` （像用來支援手動關閉）。 `NSUserActivity`將用來啟動應用程式，如果回應需要它們離開 Siri 環境，並輸入應用程式以完成它。 

Siri 自動建置適當`NSUserActivity`使用者離開的地方 Siri 環境中啟動應用程式與收取。 不過，應用程式可以提供自己的`NSUserActivity`使用自訂的詳細資訊，如有必要。

在處理目的應用程式，並將其傳回的回應 Siri 之後，然後呈現結果給使用者 （口頭和以視覺化方式）：

[![](understanding-sirikit-images/monkeychat06.png "口頭且視覺化的方式，向使用者顯示結果")](understanding-sirikit-images/monkeychat06.png#lightbox)

Siri 針對每個應用程式可用的網域有數個內建回應使用者介面。 不過，由於 MonkeyChat 已經提供選擇性的意圖 UI 延伸模組，它用來在上述範例中對使用者顯示結果的交談。

## <a name="the-intent-lifecycle"></a>意圖生命週期

有三個應用程式擴充功能會需要執行對應方式處理時的主要工作：

[![](understanding-sirikit-images/monkeychat07.png "意圖生命週期")](understanding-sirikit-images/monkeychat07.png#lightbox)

1. 應用程式必須**解決**事件中的每個參數。 如此一來，應用程式將會解決多次 （每個每個參數），有時多次針對相同的參數之後才能呼叫應用程式和使用者同意要求的功能。
2. 應用程式必須**確認**它可以用來處理要求的意圖，和 Siri 告訴獲得預期的結果。
3. 最後，應用程式必須**處理**意圖，並執行的步驟，以達到要求的結果。

### <a name="the-resolve-stage"></a>在解析階段

解析階段有助於了解使用者所提供，並可確保使用者實際上是由應用程式意圖處理時，會發生什麼情況的值使用 Siri。 

此階段也提供應用程式的影響 Siri 的行為與使用者在交談期間的機會。 若要這樣做，應用程式會提供**解析回應**。 有許多不同類型的資料，了解 Siri 預先定義的回應。

從應用程式的解決方式回應會是最常見**成功**，這表示應用程式從比對特定資料 （例如使用者的螢幕名稱） 的參數到它所知道的資訊片段。

可能的應用程式必須確認給定的要求符合它所知道的資訊的正確一段時間。 在這些情況下，它會傳送**ConfirmationRequired**回應，例如詢問使用者是或否問題*「 傳送訊息給 Bobo 絕佳？ 」*

可能有其他情況下，應用程式需要從之選項的簡短清單中選擇使用者。 在此情況下，應用程式將會提供**去除混淆**回應使用者選擇從這類的二至十部選項的清單： 

```csharp
Who do you want to message?

* Bobo the Great
* Bobo Jr.
* Little Bobo
```

Siri 處理提出選取範圍，口頭或 Siri UI 中，與互動的使用者，結果會傳回到應用程式。

在其他情況下，可能不會有足夠的資訊來解析參數的應用程式，或可能有太多相符項目，來解析 using 去除混淆 （例如其名稱中使用 Bobo 80 使用者）。 在此情況下，應用程式會將傳送**NeedsMoreDetails**回應和 Siri 會提示使用者為更明確。

如果使用者未提供值，才能為其處理程序的目的，則可以傳送**NeedsValue**回應有 Siri 提示使用者輸入的值。

如果應用程式不支援使用者已授與特定參數的值，則可以傳送**UnsupportedWithReason**回應提供的原因，為什麼不支援的值。 Siri 然後會提示使用者提供全新的值，指定它們的原因就是必要。

最後使用**NotRequired**回應以判斷 Siri 應用程式不需要指定參數的值。 如果使用者將會提供一個還是，它只會忽略由 Siri。

### <a name="the-confirm-stage"></a>在確認階段

在確認階段有兩種用途：

- 告知 Siri 處理用途，讓 Siri 可以告訴使用者即將發生的預期的結果。
- 提供有機會檢查應用程式可能需要完成要求的使用者，例如銀行付款要求中包含足夠的錢來呈現任何必要的狀態。

應用程式將會提供**意圖回應**確認步驟中，從所應填入因為太多應用程式的資訊可供使用，因此 Siri 可以它有效地與使用者通訊。

根據網域和動作的類型，使用 Siri 可能會提示使用者確認，例如傳送付款或預約的賽車之前。

### <a name="the-handle-stage"></a>控制代碼階段

處理階段是最重要的使用意圖，因為它是點，其中應用程式符合使用者的要求執行已要求您執行的工作部分。

就像它未在確認階段中，就必須提供結果盡可能最多資訊，因此 Siri 使用者可以與這個應用程式。 有時候這項資訊將會以視覺化方式呈現，或有時候 Siri 只會說它傳回給使用者。 

有些時候可能會當應用程式可能需要額外的時間來處理給定的要求，例如網路呼叫延遲，或即時個人需要要求 （例如完成和送貨單或開車汽車到使用者的位置）。 當 Siri 正在等候從應用程式的回應時，它會顯示等候 UI 使用者告知應用程式正在處理要求。

理想情況下，應用程式應該提供回應給 Siri 兩到三秒內最多。 如果應用程式知道給定的回應移至處理序花費的時間，需要傳送**InProgress**回應程式碼以使用 Siri。 應用程式正在處理在背景中的要求，而且將會繼續若要這樣做，即使它們離開 Siri 環境 Siri 接著會通知使用者。

## <a name="adding-sirikit-to-the-app"></a>SiriKit 加入應用程式

SiriKit iOS 10 中，與 Apple 已建立兩個新的擴充點：

- **對應方式擴充**-Siri 提供應用程式的內容，並會執行工作，才能滿足任何支援的對應方式。
- **對應 UI 延伸模組**-提供的自訂 UI，將會顯示應用程式內容內使用 Siri。 

也是 API，以提供單字和片語以協助您辨識的形式 Siri:

- **應用程式詞彙**-單字和片語通用於應用程式的每位使用者。
- **使用者詞彙**-單字和片語給定應用程式使用者特有的。

## <a name="the-intents-extension"></a>對應方式擴充功能

對應方式延伸會負責處理應用程式與 Siri 之間的主要互動，如下所示：

[![](understanding-sirikit-images/intents01.png "對應方式擴充功能")](understanding-sirikit-images/intents01.png#lightbox)

意圖延伸模組可支援一個或多個對應方式，是開發人員可以決定他們想要在應用程式中實作 SiriKit 的方式。 開發人員也可以新增每個需要處理的意圖個別的意圖擴充功能。  話雖如此，Apple，要求開發人員限制意圖擴充功能數目，如此 Siri 不需要開啟對應用程式，而這需要更多記憶體和時間，以處理多個處理序。

開發人員也應該知道，意圖延伸模組會執行在背景中作用中時使用 Siri。 這可讓目前正在執行上與使用者的交談仍然要處理要求的相關資訊的擴充功能與通訊時使用 Siri。

## <a name="privacy-and-security-considerations"></a>隱私權和安全性考量

Apple 已取得很棒的量值，以確保私人資訊的安全時使用 Siri 且在這種情況，沒有需要使用者登入，iOS 裝置上的數個互動使用者。 例如，當要求的賽車或進行付款。

此外，有一些應用程式可能會想要限制使用者登入裝置的特定行為。 這些情況下，應用程式可以要求**限制鎖定時允許**行為。 這透過在設定完成`Info.plist`檔案。

本機的驗證架構可用於意圖延伸模組因此，應用程式可以向使用者詢問額外的驗證資訊，即使是已經解除鎖定裝置為止。

最後，Apple Pay 是可用於意圖延伸模組以便應用程式可以完成使用 Apple Pay 的交易，並內建的 Apple Pay 工作表會出現上使用 Siri 介面。

此外，Apple 想要確保使用者知道當他們傳送給資訊第 3 個合作對象應用程式，以及在這種情況，使用者**必須**時說出特定名稱 （如應用程式的套件組合的顯示名稱中指定） 的應用程式提出要求。

Apple 已設計，以實現自然流暢交談與使用者，而這是因為 Siri，應用程式的配套名稱可以用於許多種詞類，能夠容納自然中使用者的要求。

常見的使用者所做的事情之一是"verbify 」 應用程式的名稱，也就是說，取得應用程式名稱，並使用它做要求的動詞命令。 例如， *"MonkeyChat Bobo 那些是絕佳的香蕉。 」*

## <a name="the-intents-ui-extension"></a>對應 UI 延伸模組

對應 UI 延伸模組呈現的機會，讓應用程式的 UI 和商標 Siri 體驗，並讓使用者覺得已連線到應用程式。 與此延伸模組，應用程式可以讓品牌與文字記錄 visual 和其他資訊。

[![](understanding-sirikit-images/intents02.png "範例對應方式 UI 延伸模組的輸出")](understanding-sirikit-images/intents02.png#lightbox)

一律會傳回對應方式 UI 延伸模組`UIViewController`和應用程式可以加入其所偏好內檢視控制器，例如顯示超出初始回應的其他資訊的任何項目。 對應 UI 也可以更新使用者長時間執行的事件，例如多少花愈共用到達其位置的汽車的賽車的狀態。

對應 UI 擴充功能一律顯示以及其他 Siri 內容，例如 UI 頂端的名稱與應用程式圖示或，根據的用途，可能會顯示在下方的按鈕 （例如 [傳送] 或 [取消] 5d;）。

有一些情況下，應用程式可以在其中取代 Siri 顯示給使用者，根據預設，例如訊息或對應所在應用程式時，可以使用其中一個量身訂做的應用程式取代預設經驗的資訊。

> [!IMPORTANT]
> 雖然您可以加入互動式項目，例如`UIButtons`或`UITextFields`意圖 UI 延伸模組來`UIViewController`這些嚴格禁止做為在非互動意圖 UI，使用者不能與之互動。

它是完全選擇性的應用程式提供意圖 UI 延伸模組，因為 Siri 包含一組預設的 UI 每一種意圖類型。 此外，對應方式 UI 介面只有會提供針對特定目的 Apple 已視為很有幫助使用者。

## <a name="adding-sirikit-vocabulary"></a>加入 SiriKit 詞彙

實作 SiriKit 的最後一段位於應用程式內提供必要的詞彙。 許多應用程式有唯一的方式描述資訊給使用者和使用者會提供資訊給應用程式的唯一方式。

因為這個緣故，Siri 需要了解的單字和片語的唯一應用程式的應用程式的協助。 這些片語的一些會在應用程式部分，讓每個使用者會知道並了解它們。 尚未其他人將會是唯一指定使用者的應用程式。

### <a name="app-specific-vocabulary"></a>應用程式特定詞彙

應用程式特定詞彙定義的特定的單字和片語，將已知的所有應用程式的使用者，例如一種載具，型別或健身名稱。 由於這些是應用程式的一部分，其定義位於`AppIntentVocabulary.plist`檔案做為主要的應用程式套件組合的一部分。 此外，應該當地語系化這些單字和片語。

有數個部分的詞彙`AppIntentVocabulary.plist`檔案：

- **範例應用程式會使用**-這些使用者可以進行的應用程式的要求提供一組常見使用案例。 例如： *"開頭健身 MonkeyFit。 」*
- **參數**-這些資料行會提供一組應用程式的特定的非標準的參數類型。 例如，健身名稱 MonkeyFit 應用程式。 這些包括：
    - **片語**-可讓應用程式定義應用程式的唯一字詞。 例如： MonkeyFit 應用程式的 「 Bananarific"健身類型。 
    - **發音**-可讓以簡單的發音拼字給定片語發音提示 Siri。 例如，"ba nana ri f"。
    - **範例**-提供的範例應用程式中使用給定的片語。 例如， *"啟動 Bananarific 中 MonkeyFit"*。

如需詳細資訊，請參閱 Apple[應用程式詞彙檔案格式參考](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/CustomVocabularyKeys.html#//apple_ref/doc/uid/TP40016875-CH10-SW1)。

### <a name="user-specific-vocabulary"></a>使用者特定詞彙

使用者特定詞彙即將提供給個別使用者的應用程式特有的單字或片語。 這些將會提供在執行階段主應用程式 （不應用程式擴充功能） 從做為已排序集合的詞彙中的使用者，最重要的詞彙清單的開頭的最大顯著性使用量優先順序排序。

看看 MonkeyChat 應用程式以上所顯示的範例。 MonkeyChat 會保留所有使用者的連絡人，它會傳送至 Siri 透過使用者特定詞彙的清單。 它也會保存一份依現狀使用者有 10 個最近的連絡人，且有一組每位使用者的我的最愛連絡人。 此範例中，最愛的連絡人應該是我們使用者特定詞彙，後面接著新連絡人的開頭然後其餘的使用者的連絡人。

使用者特定詞彙支援下列類型的資訊：

- 連絡人的名稱。
- 健身名稱。
- 相片專輯名稱。
- 相片的關鍵字。

如果應用程式依賴 iOS 通訊錄，應用程式不會採取任何動作，因為這項資訊已可使用 Siri。 應用程式只需要提供連絡人的名稱，如果應用程式有自己的連絡人的唯一資料庫。

在設計詞彙時，只會提供使用者知道與關心的必要值。 請避免提供資訊，例如電話號碼或電子郵件地址。

應用程式也需要使用者特定詞彙變更時，立即更新 Siri。 使用者慣用的要求資訊從 Siri 加入其 iOS 裝置的瞬間。 例如，如果使用者在應用程式中加入新的連絡人，傳送該資訊給 Siri 使用者將它儲存為。

更重要的是，應用程式_必須_刪除資訊 Siri 詞彙的立即因為如果這些檔案刪除的資訊，但 Siri 仍已辨識其小時或天後，無法成為干擾使用者。

> [!IMPORTANT]
> 應用程式應該移除所有的使用者特定詞彙 Siri 如果使用者選擇重設應用程式，或如果他們登出。

## <a name="sirikit-permissions"></a>SiriKit 權限

SiriKit 的最後一段的重心權限。 就像使用其他功能 （例如相片、 數位相機或連絡人） iOS，使用者必須授與應用程式能夠向 Siri 的明確權限。

應用程式能提供的字串定義將提供給 Siri 並提供理由為何的使用者應該授與此存取資訊。 

Apple 建議應用程式應該使用 Siri 第一次使用者開啟應用程式，它們已經升級至 iOS 10 之後使用者要求權限。 這是讓使用者知道 Siri 整合和它們進行其第一個要求之前，可以預先核准的使用方式。

## <a name="sirikit-and-maps"></a>SiriKit 和對應

SiriKit 是 iOS 中不可或缺的一部分，並使用較大的對應方式架構加入 iOS 10。 對應方式架構是設計用來與系統的其他部分共用一般和共用的動作和對應方式。

對應方式 framework 超出只 Siri 整合，並提供其他功能，例如連絡人整合應用程式，可能會變成預設電話語音或傳訊應用程式的特定連絡人。 對應方式也會提供與為使用者提供最佳的 VOIP 體驗可能 CallKit 深度整合。

在 iOS 10 中的對應應用程式已經加入功能，例如使用者可以活頁簿內對應 UI 直接的賽車的賽車共用。 SiriKit 提供與地圖的常見擴充點，所以 Siri 和對應間無法共用的賽車的共用 （和其他） 的對應方式。 

這表示，如果應用程式已採用 SiriKit 擴充功能，它也會對應整合免費。 

## <a name="designing-a-great-siri-experience"></a>設計絕佳的 Siri 體驗

設計良好的使用者經驗時使用 Siri 中整合應用程式是不同於設計絕佳的應用程式使用者介面。 一般情況下，使用者互動，直接在應用程式畫面時使用 Siri 有屬於不同多次沒有視覺化介面完全顯示時。 例如，當使用者開始交談並*"< Hey Siri"*。

### <a name="how-siri-helps-the-developer"></a>Siri 如何協助開發人員

在設計時使用 Siri 的應用程式的互動，將會建置應用程式*交談介面*，這表示內容衍生自 Siri 是否有與應用程式代表使用者的交談。

中的視覺參考不存在，使用者必須持續追蹤的其標頭中所呈現的資訊。 因為這個緣故，Siri 提供裸機最少必要資訊來完成工作的使用者會想要完成。

交談介面形狀問題並回應從使用者和 Siri 在交談期間。 因此，務必考慮如何 Siri 會詢問一些問題，以及設計這個介面時，會回應。

採取下列範例會建立一則訊息，Siri 可能的問題，以回應使用者*」 準備好將它送出嗎？ 」*. 使用者無法如回應許多不同的方式*「 傳送 」*， *[取消]*或甚至是完全不相關的這個問題的答案。 不論如何，交談播放，Siri 會處理應用程式中，並只傳送它的相關資訊成為可用。

有幾種不同的使用者可能會起始 Siri 交談：

- 方法是揀選裝置，按 [首頁] 按鈕。 在此情況下更多的視覺介面和較少的用語回應，將會顯示使用 Siri。
- 說明*"< Hey Siri"*和啟動未授權者手可用的交談。 在此情況下使用 Siri 會較不 visual 和更詳細。
- 使用協助工具功能，例如藍芽啟用聽覺輔助工具，UI 會專供有特殊需求的使用者。
- 使用車上播放的使用者必須保留其注意著重於推動保持在最小值所造成的分心。

### <a name="how-the-developer-helps-siri"></a>開發人員如何協助使用 Siri

整合應用程式與時使用 Siri，開發人員必須測試通常這項整合，並確保它們會儘可能要求相同的資訊或工作的許多不同的方式進行許多不同的要求。

因為任兩個人員認為相同，差別，很重要的開發人員取得許多不同的測試版測試人員儘可能有助於微調 Siri 整合。 使用者可能會詢問您的資訊或進行要求的方式開發人員永遠不會透過的和此微調有助於確保最大範圍的使用者群組擁有絕佳的體驗，其應用程式使用 Siri。

測試在不同的情況下與環境中。 起始交談的所有方式，以確保這些交談保持流體和自然 Siri。 測試在其中使用者會以上很可能會使用應用程式，像是擁擠健身房中的位置。

請確定應用程式會提供所有 Siri 需要正確地代表使用者的要求和結果的資訊。 在指針可用的情況下使用 Siri 時，這是特別有用。

### <a name="siri-design-guidelines"></a>Siri 設計指導方針

一定要記得的 Siri 對話的使用者應用程式代替。 開發人員想確定這項交談會維持為流暢且具有自然越好。

如同處理任何重要的交談，開發人員必須確定下列事項：

- 確認應用程式已準備好交談。
- 應用程式會接聽正確的使用者嘗試完成的工作。
- 確認應用程式會在適當時間要求相關的問題。
- 應用程式會回應至要求的使用者搜尋的資訊。

#### <a name="preparing-for-the-conversation"></a>準備進行交談

請記住第一件事是應用程式的使用者不完全相同的開發人員。 它們可能來自於不同的背景，從使用不同的語言，或使用應用程式時有特殊需求。

此外，開發人員設計及建置應用程式時，因為它們有深，深入的應用程式和其內部運作方式和一般使用者不會有函式。 因此，開發人員可能會不同於一般使用者要求 Siri 的要求。

這就是為何，請務必有許多不同的人，盡可能互動的應用程式，透過使用 Siri。 使用者可以進行要求的應用程式，透過開發人員有永遠不會視為或開發人員未考慮方式的 Siri。

#### <a name="ensure-the-app-is-a-good-listener"></a>請確定應用程式是很好的接聽程式

開發人員必須確定應用程式是很好的接聽程式，並可取得符合使用者期望交談的細節。 但是，您也可以，他們可能不提供的所有資訊的應用程式需要以達到要求的工作。

有數種方式，應用程式無法處理這種情況：

- **遺漏值挑選最佳的預設**-例如騎，共用應用程式可能會預設為使用者的目前位置上，如果他們未指定他們想要從挑選的位置。
- **合理推測**-使用應用程式收集使用者的特定資訊，應用程式可能可以進行並推測上遺失的資訊，例如填入遺失的行動電話號碼，從使用者的連絡資訊。 不過，應該小心避免意外錯誤狀況，例如挑選成本最高的選項等。
- **如需詳細資訊提示**-應用程式可以有 Siri 提示使用者輸入遺漏的值。 不過，這裡的關鍵保持交談簡單和點。 使用者將會快速也變得如果他們必須回答幾個問題，以達成其要求。
- **處理錯誤的資訊依正常程序**位使用者可能會提供應用程式未預期或無法處理指定的內容中的值。 請確定應用程式與相關給使用者，使它清除，以及他們可以輕鬆將更正這種情況。

應用程式時所出現問題的單一值，來處理此情形的慣用的方法是有 Siri 要求使用者確認。 例如， *「 您是否想 Bobo 絕佳？ 」*，其中它們與簡單的是或否回應來回覆。

當有數個可能的選擇可能是正確的單一值的情況下，去除混淆是慣用的處理方法。 在此情況下使用 Siri 可以提示使用者最多十種可能的選項，可從中選擇。 例如: 

```csharp
Who do you want to send the message to?

* Bobo the Great!
* Bobo Jr.
* Little Bobo
```

如果仍然在問題時，會有 Siri 提示使用者提供全新、 更明確的回應指定的值。

#### <a name="request-final-confirmation"></a>要求最終的確認

應用程式會實際執行工作，以符合使用者的要求之前，請使用 Siri 會檢查應用程式擴充功能，以確保一切都已就緒。 例如，使用者沒有足夠 money 在其帳戶來進行要求的付款嗎？

此外，應用程式必須確保它會提供所有可能的資訊來使用 Siri 讓它可以呈現給使用者，並確認即將執行工作符合客戶的期望。

一旦使用者已確認要求和應用程式執行它，以再次確保它已提供的所有結果回到 Siri 讓它可以與它們相關使用者的應用程式需求。

#### <a name="responding-to-the-request"></a>回應要求

Siri 針對每個網域和它所知道的動作有數個內建的使用者介面。 不過，適用時，應用程式可以提供自訂的意圖 UI 擴充功能，以提供應用程式的商標和 UI 或詳細資訊，比起在請求中豐富使用者體驗。

話雖如此，本例應該 Siri 設計自訂介面時使用。 一般而言，使用者想要取得特定盡快完成的工作，並不想要對多載具有不必要的資訊。

也小心以確保自訂使用者介面看起來，並正確回應中的所有不同的 iOS 裝置和使用者可能會具有或使用裝置的方向。

在適當的情況下，使用 SiriKit API 來隱藏預設 Siri UI 中已有任何重複的資訊。 尚未確認的應用程式仍然提供資訊給 Siri 讓它在指針可用的情況下口頭呈現。

可能會有 Siri 將會啟動應用程式，以符合使用者的要求，例如呈現使用者已要求的相片，其中的情況。 在這些情況下，不會意外使用者。 顯示所需的資訊，而不需要中繼步驟或進一步所需的互動。 永遠不會顯示資訊或執行的工作，使用者不需要。

### <a name="polishing-the-design"></a>修改設計

有幾個步驟 Apple 建議 unicode 資料採用 polish 交談介面的設計。 首先，是藉由提供清楚、 簡潔詞彙和使用案例範例，以使用 Siri。

一種使用者探索應用程式的方式是使用 Siri 和要求時，交談的起始*」 可以您做什麼？ 」* Siri 就會顯示下列幾項差異，它可以執行，包括開發人員的應用程式，以及範例英雄使用案例，它已透過提供其`plist`檔案。

如何撰寫好的範例使用案例：

- 請確定範例包括應用程式名稱。
- 保持簡短，以點的範例。
- 每個應用程式支援的對應方式，提供多個範例。
- 依優先順序排列對應方式，其中最常見使用案例的應用程式為基礎的範例。
- 請確定應用程式提供當地語系化的範例。
- 請確認指定的運作，如預期般應用程式內每個範例。
- 避免在範例中，因此不包含文字，例如位址 Siri *「 < Hey Siri...」*
- 例如，避免任何不必要的 pleasantries *「 請"*或*「 感謝 」*。

需要適當的時間，以瀏覽並實驗應用程式可以如何形成 Siri 有與它代表使用者的交談。 確定要為其互動與一般使用者在整個程序，並期望的應用程式可能會隨著時間變更。

請務必記住，應用程式在不同情況下，不同的方法，可以叫用 Siri 交談的所有測試。 測試在真實世界位置的使用者可能使用應用程式時，離開辦公室與支援人員。

盡可能與交談使用 Siri （代表應用程式） 是流體、 自然以及 「 覺得最適合"。 

## <a name="summary"></a>總結

這篇文章已涵蓋才能使用 SiriKit 並顯示它可以與 Xamarin.iOS 應用程式提供的 iOS 裝置上使用 Siri 和對應的應用程式的使用者可以存取的服務互動的重要概念。




## <a name="related-links"></a>相關連結

- [ElizaChat 範例](https://developer.xamarin.com/samples/monotouch/ios10/ElizaChat/)
- [SiriKit 程式設計指南](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html)
- [對應方式 Framework 參考](https://developer.apple.com/reference/intents)
- [對應 UI Framework 參考](https://developer.apple.com/reference/intentsui)
